select * from member;
select * from fb_recruit;    
select * from fb_rental;     
select * from fb_branch;
select * from fb_court;
select * from fb_team;
select * from fb_goods;
select * from fb_matching;
select * from fb_league;
select * from fb_reservation;
select * from fb_notice;
select * from fb_gallery;

-- 회원
drop table member;
create table member(
    id varchar2(50) primary key,
    pwd varchar2(20) not null,
    name varchar2(20) not null,
    phone char(13) not null,
    enroll_date date default sysdate
);

comment on column member.id is '아이디(메일)';
comment on column member.pwd is '비밀번호';
comment on column member.name is '이름';
comment on column member.phone is '연락처';
comment on column member.enroll_date is '가입일';

insert into member values('admin','1234','관리자','010-0000-1111',sysdate);

select * from member;

commit;

-- 지점
drop table fb_branch;
drop sequence seq_branch_code;
create table fb_branch(
    branch_code number primary key,
    branch_name varchar2(20) not null,
    branch_addr varchar2(200) not null,
    branch_phone char(13) not null,
    branch_tel varchar2(13)
);
create sequence seq_branch_code;

comment on column fb_branch.branch_code is '지점번호';
comment on column fb_branch.branch_name is '지점이름';
comment on column fb_branch.branch_addr is '지점주소';
comment on column fb_branch.branch_phone is '지점연락처';
comment on column fb_branch.branch_tel is '점주연락처';

select * from fb_branch;

commit;

-- 구장
drop table fb_court;
create table fb_court(
    court_b_code number not null,
    court_c_code number primary key,
    court_name varchar2(20) not null,
    court_tile varchar2(10) not null,
    court_status number default 0,
    constraint fk_court_b_code foreign key (court_b_code) references fb_branch (branch_code) on delete cascade
);

comment on column fb_court.court_b_code is '지점번호';
comment on column fb_court.court_c_code is '구장번호';
comment on column fb_court.court_name is '구장이름';
comment on column fb_court.court_time is '예약시간';
comment on column fb_court.court_status is '대관 가능 여부(0가능/1불가능)';

select * from fb_court;

commit;

-- 용병
drop table fb_recruit;
drop sequence seq_rec_no;
create table fb_recruit(
    rec_no number primary key,
    rec_name varchar2(50) not null,
    rec_b_code number not null,
    rec_c_code number not null,
    rec_phone char(13) not null,
    rec_amount number not null,
    rec_date date not null,
    rec_time varchar2(20) not null,
    rec_level varchar2(20) not null,
    rec_able number default 0,
    rec_memo varchar2(1000),
    rec_enroll_date date default sysdate,
    constraint fk_rec_name foreign key (rec_name) references member (id) on delete cascade,
    constraint fk_rec_c_code foreign key (rec_c_code) references fb_court (court_c_code) on delete cascade,
    constraint fk_rec_b_code foreign key (rec_b_code) references fb_branch (branch_code) on delete cascade
);
create sequence seq_rec_no;

comment on column fb_recruit.rec_no is '게시글번호';
comment on column fb_recruit.rec_name is '신청인/지원자ID';
comment on column fb_recruit.rec_c_code is '구장코드';
comment on column fb_recruit.rec_b_code is '지점코드';
comment on column fb_recruit.rec_phone is '신청인/지원자 연락처';
comment on column fb_recruit.rec_amount is '모집인원';
comment on column fb_recruit.rec_date is '매치일정';
comment on column fb_recruit.rec_time is '매치시간';
comment on column fb_recruit.rec_level is '실력레벨';
comment on column fb_recruit.rec_able is '매치 가능 여부';
comment on column fb_recruit.rec_memo is '메모';
comment on column fb_recruit.rec_enroll_date is '작성일자';

select * from fb_recruit;

commit;

-- 대회신청
drop table fb_team;
drop sequence seq_team_no;
create table fb_team(
    team_no number primary key,
    team_name varchar2(50) not null unique,
    team_rep varchar2(10) not null,
    team_phone varchar2(20) not null,
    team_email varchar2(50) not null,
    team_color_home varchar2(10) not null,
    team_color_away varchar2(10) not null,
    filepath varchar2(50),
    team_pw varchar2(15) not null,
    constraint fk_team_email foreign key (team_email) references member (id) on delete cascade
);
create sequence seq_team_no;

comment on column fb_team.team_no is '팀 접수 번호';
comment on column fb_team.team_name is '팀이름';
comment on column fb_team.team_rep is '대표자 이름';
comment on column fb_team.team_phone is '대표자 연락처';
comment on column fb_team.team_email is '대표자 이메일';
comment on column fb_team.team_color_home is '홈팀 색상';
comment on column fb_team.team_color_away is '어웨이팀 색상';
comment on column fb_team.filepath is '엠블럼 파일 경로';
comment on column fb_team.team_pw is '팀 비밀번호';

select * from fb_team;

commit;

-- 용품
drop table fb_goods;
drop sequence seq_goods_g_id;
create table fb_goods(
    goods_b_code number not null,
    goods_g_id number primary key,
    goods_name varchar2(20) not null,
    goods_price number not null,
    goods_count number default 0,
    constraint fk_goods_b_code foreign key (goods_b_code) references fb_branch (branch_code) on delete cascade
);
create sequence seq_goods_g_id;

comment on column fb_goods.goods_b_code is '지점번호';
comment on column fb_goods.goods_g_id is '용품번호';
comment on column fb_goods.goods_name is '용품이름';
comment on column fb_goods.goods_price is '용품가격';
comment on column fb_goods.goods_count is '용품재고';

select * from fb_goods;

commit;

-- 렌탈
drop table fb_rental;
create table fb_rental(
    rental_id varchar2(50) not null,
    rental_count number not null,
    rental_cost number not null,
    goods_g_id number not null,
    constraint fk_rental_id foreign key (rental_id) references member (id) on delete cascade,
    constraint fk_goods_g_id foreign key (goods_g_id) references fb_goods (goods_g_id) on delete cascade    
);

comment on column fb_rental.rental_id is '주문자ID';
comment on column fb_rental.rental_count is '주문개수';
comment on column fb_rental.rental_cost is '가격';
comment on column fb_rental.goods_g_id is '용품번호';

select * from fb_rental;

commit;

-- 매치
drop table fb_matching;
drop sequence seq_match_no;
create table fb_matching(
    match_no number primary key,
    match_type varchar2(15) not null,
    match_b_code number not null,
    match_c_code number not null,
    match_writer varchar2(50) not null,
    match_phone char(13) not null,
    match_date date not null,
    match_time varchar2(20) not null,
    match_u_color varchar2(10) not null,
    match_level varchar2(10) not null,
    match_able number default 0,
    match_amount number not null,
    match_memo varchar2(1000),
    match_enroll_date date default sysdate,
    constraint fk_match_writer foreign key (match_writer) references member (id) on delete cascade,
    constraint fk_match_b_code foreign key (match_b_code) references fb_branch (branch_code) on delete cascade
);
create sequence seq_match_no;

comment on column fb_matching.match_no is '매칭번호';
comment on column fb_matching.match_type is '매치형태';
comment on column fb_matching.match_b_code is '지점코드';
comment on column fb_matching.match_c_code is '구장코드';
comment on column fb_matching.match_writer is '신청자(작성자)';
comment on column fb_matching.match_phone is '신청자 연락처';
comment on column fb_matching.match_date is '매치일정';
comment on column fb_matching.match_time is '매치시간';
comment on column fb_matching.match_u_color is '팀 유니폼 색상';
comment on column fb_matching.match_level is '실력 레벨';
comment on column fb_matching.match_able is '매치 가능 여부';
comment on column fb_matching.match_amount is '신청 가능 팀 수';
comment on column fb_matching.match_memo is '메모';
comment on column fb_matching.match_enroll_date is '작성일자';

select * from fb_matching;

commit;

-- 대회진행
drop table fb_league;
drop sequence seq_fb_league;
create table fb_league(
    league_no number primary key,
    league_title varchar2(15) not null,
    league_t_no_a varchar2(50) not null,
    league_t_filepath_a varchar2(50),
    league_score varchar2(10) not null,
    league_t_no_b varchar2(50) not null,
    league_t_filepath_b varchar2(50),
    constraint fk_league_t_no_a foreign key (league_t_no_a) references fb_team (team_name) on delete cascade,
    constraint fk_league_t_no_b foreign key (league_t_no_b) references fb_team (team_name) on delete cascade
);
create sequence seq_fb_league;

comment on column fb_league.league_no is '경기 진행 번호';
comment on column fb_league.league_title is '경기 정보';
comment on column fb_league.league_t_no_a is 'A팀 이름';
comment on column fb_league.league_t_filepath_a is 'A팀 엠블럼 경로';
comment on column fb_league.league_score is '스코어';
comment on column fb_league.league_t_no_b is 'B팀 이름';
comment on column fb_league.league_t_filepath_b is 'B팀 엠블럼 경로';

select * from fb_league;

commit;

-- 대관
drop table fb_reservation;
drop sequence seq_res_no;
create table fb_reservation(
    res_no number primary key,
    res_b_code number not null,
    res_c_code number not null,
    res_m_email varchar2(50) not null,
    res_m_phone char(13) not null,
    res_date date not null,
    res_time number not null,
    res_r_water number default 0,
    res_r_wear number default 0,
    res_r_shose number default 0,
    res_total_cost number not null,
    res_cancel number default 0 check(res_cancel in (0,1)),
    constraint fk_res_m_email foreign key (res_m_email) references member (id) on delete cascade,
    constraint fk_res_c_code foreign key (res_c_code) references fb_court (court_c_code) on delete cascade,
    constraint fk_res_b_code foreign key (res_b_code) references fb_branch (branch_code) on delete cascade
);
create sequence seq_res_no;

comment on column fb_reservation.res_no is '대관번호';
comment on column fb_reservation.res_b_code is '지점번호';
comment on column fb_reservation.res_c_code is '구장번호';
comment on column fb_reservation.res_m_email is '예약자ID';
comment on column fb_reservation.res_m_phone is '예약자 연락처';
comment on column fb_reservation.res_date is '예약날짜';
comment on column fb_reservation.res_time is '예약시간';
comment on column fb_reservation.res_r_water is '대여(물)';
comment on column fb_reservation.res_r_wear is '대여(조끼)';
comment on column fb_reservation.res_r_shose is '대여(신발)';
comment on column fb_reservation.res_total_cost is '결제 예정 금액';
comment on column fb_reservation.res_cancel is '대관취소여부(0취소안함/1신청/2완료)';

select * from fb_reservation;

commit;

-- 공지사항
drop table fb_notice;
drop sequence seq_notice_no;
create table fb_notice(
    notice_no number primary key,
    notice_title varchar2(50) not null,
    notice_writer varchar2(20) not null,
    notice_date date default sysdate,
    notice_content varchar2(2000) not null,
    notice_hit number default 0
);
create sequence seq_notice_no;

comment on column fb_notice.notice_no is '공지번호';
comment on column fb_notice.notice_title is '제목';
comment on column fb_notice.notice_writer is '작성자';
comment on column fb_notice.notice_content is '내용';
comment on column fb_notice.notice_hit is '조회수';
comment on column fb_notice.notice_date is '작성일자';

select * from fb_notice;

commit;

-- 갤러리
drop table fb_gallery;
drop sequence seq_photo_no;
create table fb_gallery(
    photo_no number primary key,
    photo_writer varchar2(50) not null,
    filename varchar2(50) not null,
    photo_date date default sysdate
);
create sequence seq_photo_no;

comment on column fb_gallery.photo_no is '게시물 번호';
comment on column fb_gallery.photo_writer is '작성자';
comment on column fb_gallery.filename is '파일경로';
comment on column fb_gallery.photo_date is '작성일자';

select * from fb_gallery;

commit;